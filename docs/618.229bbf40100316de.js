"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[618],{6618:(p,d,c)=>{c.r(d),c.d(d,{WhislistComponent:()=>O});var _=c(6814),m=c(1120),u=c(8129),t=c(4769),a=c(1166),g=c(2425),o=c(6475);function h(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.addfavwhislist(r._id))}),t.qZA()}}function f(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.removewhish(r._id))}),t.qZA()}}function v(s,l){if(1&s&&t._UZ(0,"i",21),2&s){const i=l.$implicit,e=t.oxw().$implicit;t.ekj("rating-color",e.ratingsAverage>=i)}}const x=function(s){return["/details",s]},C=function(){return[1,2,3,4,5]};function T(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,h,1,0,"i",7),t.YNc(3,f,1,0,"i",8),t.TgZ(4,"header",9)(5,"div",10),t._UZ(6,"img",11),t.qZA(),t.TgZ(7,"div")(8,"h2",12),t._uU(9),t.ALo(10,"cuttext"),t.qZA(),t.TgZ(11,"h3",13),t._uU(12),t.qZA()(),t.TgZ(13,"div",14)(14,"span",15),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"span"),t.YNc(18,v,1,2,"i",16),t._uU(19),t.qZA()()(),t.TgZ(20,"footer")(21,"button",17,18),t.NdJ("click",function(){const n=t.CHM(i).$implicit,A=t.MAs(22),W=t.oxw(2);return t.KtG(W.addtocard(n._id,A))}),t._uU(23,"+ addto card"),t.qZA()()()()}if(2&s){const i=l.$implicit,e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.whislist.includes(i._id)),t.xp6(1),t.Q6J("ngIf",e.whislist.includes(i._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(17,x,i._id)),t.xp6(2),t.Q6J("src",i.imageCover,t.LSH)("title",i.title)("alt",i.title),t.xp6(3),t.hij(" ",t.xi3(10,11,i.title,3)," "),t.xp6(3),t.hij(" ",i.category.name," "),t.xp6(3),t.Oqu(t.xi3(16,14,i.price,"GBP")),t.xp6(3),t.Q6J("ngForOf",t.DdM(19,C)),t.xp6(1),t.Oqu(i.ratingsAverage)}}function E(s,l){if(1&s&&(t.TgZ(0,"section",1)(1,"p"),t._uU(2,"popular products"),t.qZA(),t._UZ(3,"input",2),t.TgZ(4,"div",3),t.YNc(5,T,24,20,"div",4),t.qZA()()),2&s){const i=t.oxw();t.xp6(5),t.Q6J("ngForOf",i.products)}}let O=(()=>{class s{constructor(i,e,r,n){this._WhislistService=i,this._ToastrService=e,this._CartService=r,this._Renderer2=n,this.products=[],this.whislist=[]}ngOnInit(){this._WhislistService.getwhislist().subscribe({next:i=>{console.log(i),this.products=i.data,this.whislist=i.data.map(e=>e._id),console.log("newdata",this.whislist)}})}addtocard(i,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addtocart(i).subscribe({next:r=>{console.log("details",r),this._ToastrService.success(r.message),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartnum.next(r.numOfCartItems)},error:r=>{console.log(r.error.message),this._Renderer2.removeAttribute(e,"disabled")}})}addfavwhislist(i){this._WhislistService.addtowhislist(i).subscribe({next:e=>{this._ToastrService.success(e.message),this.whislist=e.data}})}removewhish(i){this._WhislistService.removewhislist(i).subscribe({next:e=>{this._ToastrService.success(e.message),this.whislist=e.data,this._WhislistService.getwhislist().subscribe({next:r=>{console.log(r),this.products=r.data}})}})}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(a.p),t.Y36(g._W),t.Y36(o.N),t.Y36(t.Qsj))};static#i=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-whislist"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","home",4,"ngIf"],[1,"home"],["type","text","placeholder","search",1,"form-control","mx-auto","w-50","rounded","mb-5"],[1,"row","g-4"],["class","col-md-4 col-xl-2 col-sm-6 col-lg-3",4,"ngFor","ngForOf"],[1,"col-md-4","col-xl-2","col-sm-6","col-lg-3"],[1,"product","h-100","p-2","small"],["class","fa-regular fa-heart heart fa-3x",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart fa-3x",3,"click",4,"ngIf"],[3,"routerLink"],[1,"imgcard"],[1,"w-100",3,"src","title","alt"],[1,"h6"],[1,"text-main","h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small"],["class","fas fa-star rating-color",3,"rating-color",4,"ngFor","ngForOf"],[1,"btn-main","w-100",3,"click"],["msgbtn",""],[1,"fa-regular","fa-heart","heart","fa-3x",3,"click"],[1,"fa-solid","fa-heart","heart","fa-3x",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(e,r){1&e&&t.YNc(0,E,6,1,"section",0),2&e&&t.Q6J("ngIf",r.products.length>0)},dependencies:[_.ez,_.sg,_.O5,_.H9,m.rH,u.r]})}return s})()},6475:(p,d,c)=>{c.d(d,{N:()=>t});var _=c(5619),m=c(4769),u=c(9862);let t=(()=>{class a{constructor(o){this._HttpClient=o,this.cartnum=new _.X(0),this.myheader={token:localStorage.getItem("eToken")}}addtocart(o){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:o},{headers:this.myheader})}getcard(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myheader})}removecart(o){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{headers:this.myheader})}updatacart(o,h){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{count:h},{headers:this.myheader})}clearall(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myheader})}static#t=this.\u0275fac=function(h){return new(h||a)(m.LFG(u.eN))};static#i=this.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);