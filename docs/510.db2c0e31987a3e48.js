"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[510],{9510:(h,u,o)=>{o.r(u),o.d(u,{ProductsComponent:()=>T});var s=o(6814),l=o(1120),p=o(8129),a=o(6472),i=o(95),d=o(530),t=o(4769),m=o(4972),C=o(2425),P=o(6475);function v(n,g){if(1&n&&t._UZ(0,"i",19),2&n){const e=g.$implicit,r=t.oxw().$implicit;t.ekj("rating-color",r.ratingsAverage>=e)}}const M=function(n){return["/details",n]},O=function(){return[1,2,3,4,5]};function f(n,g){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"header",9)(3,"div",10),t._UZ(4,"img",11),t.qZA(),t.TgZ(5,"div")(6,"h2",12),t._uU(7),t.ALo(8,"cuttext"),t.qZA(),t.TgZ(9,"h3",13),t._uU(10),t.qZA()(),t.TgZ(11,"div",14)(12,"span",15),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"span"),t.YNc(16,v,1,2,"i",16),t._uU(17),t.qZA()()(),t.TgZ(18,"footer")(19,"button",17,18),t.NdJ("click",function(){const _=t.CHM(e).$implicit,A=t.MAs(20),D=t.oxw(2);return t.KtG(D.addtocard(_._id,A))}),t._uU(21,"+ addto card"),t.qZA()()()()}if(2&n){const e=g.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(15,M,e._id)),t.xp6(2),t.Q6J("src",e.imageCover,t.LSH)("title",e.title)("alt",e.title),t.xp6(3),t.hij(" ",t.xi3(8,9,e.title,3)," "),t.xp6(3),t.hij(" ",e.category.name," "),t.xp6(3),t.Oqu(t.xi3(14,12,e.price,"GBP")),t.xp6(3),t.Q6J("ngForOf",t.DdM(17,O)),t.xp6(1),t.hij(" ",e.ratingsAverage,"")}}const x=function(n,g,e){return{id:"propaginate",itemsPerPage:n,currentPage:g,totalItems:e}};function E(n,g){if(1&n){const e=t.EpF();t.TgZ(0,"section",1)(1,"p"),t._uU(2,"popular products"),t.qZA(),t.TgZ(3,"input",2),t.NdJ("ngModelChange",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.term=c)}),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,f,22,18,"div",4),t.ALo(6,"paginate"),t.ALo(7,"search"),t.qZA(),t.TgZ(8,"div",5)(9,"pagination-controls",6),t.NdJ("pageChange",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(c))})("pageBoundsCorrection",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(c))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.term),t.xp6(2),t.Q6J("ngForOf",t.xi3(6,6,t.xi3(7,9,e.products,e.term),t.kEZ(12,x,e.pageSize,e.currentPage,e.total))),t.xp6(4),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let T=(()=>{class n{constructor(e,r,c,_){this._ProductsService=e,this._ToastrService=r,this._CartService=c,this._Renderer2=_,this.pageSize=0,this.currentPage=1,this.total=0,this.term="",this.products=[]}ngOnInit(){this._ProductsService.getallproduct().subscribe({next:e=>{console.log(e.data),this.products=e.data,this.pageSize=e.metadata.limit,this.currentPage=e.metadata.currentPage,this.total=e.results}})}pageChanged(e){this._ProductsService.getallproduct(e).subscribe({next:r=>{console.log(r.data),this.products=r.data,this.pageSize=r.metadata.limit,this.currentPage=r.metadata.currentPage,this.total=r.results}})}addtocard(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addtocart(e).subscribe({next:c=>{console.log("details",c),this._ToastrService.success(c.message),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartnum.next(c.numOfCartItems)},error:c=>{console.log(c.error.message),this._Renderer2.removeAttribute(r,"disabled")}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(m.s),t.Y36(C._W),t.Y36(P.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","home",4,"ngIf"],[1,"home"],["type","text","placeholder","search",1,"form-control","mx-auto","w-50","rounded","mb-5",3,"ngModel","ngModelChange"],[1,"row","g-4"],["class","col-md-4 col-xl-2 col-sm-6 col-lg-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center","mt-5"],["id","propaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-md-4","col-xl-2","col-sm-6","col-lg-3"],[1,"product","h-100","p-2","small"],[3,"routerLink"],[1,"imgcard"],[1,"w-100",3,"src","title","alt"],[1,"h6"],[1,"text-main","h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small"],["class","fas fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"btn-main","w-100",3,"click"],["msgbtn",""],[1,"fas","fa-star"]],template:function(r,c){1&r&&t.YNc(0,E,10,16,"section",0),2&r&&t.Q6J("ngIf",c.products.length>0)},dependencies:[s.ez,s.sg,s.O5,s.H9,l.rH,p.r,a.JX,a._s,a.LS,i.u5,i.Fj,i.JJ,i.On,d.C],styles:[".home[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .imgcard[_ngcontent-%COMP%]{overflow:hidden}.home[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]:hover   .imgcard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.product[_ngcontent-%COMP%]   .imgcard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .5s}.home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:30px;margin-top:20px}"]})}return n})()},6475:(h,u,o)=>{o.d(u,{N:()=>a});var s=o(5619),l=o(4769),p=o(9862);let a=(()=>{class i{constructor(t){this._HttpClient=t,this.cartnum=new s.X(0),this.myheader={token:localStorage.getItem("eToken")}}addtocart(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:t},{headers:this.myheader})}getcard(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myheader})}removecart(t){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${t}`,{headers:this.myheader})}updatacart(t,m){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${t}`,{count:m},{headers:this.myheader})}clearall(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myheader})}static#t=this.\u0275fac=function(m){return new(m||i)(l.LFG(p.eN))};static#e=this.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},4972:(h,u,o)=>{o.d(u,{s:()=>p});var s=o(4769),l=o(9862);let p=(()=>{class a{constructor(d){this._HttpClient=d}getallproduct(d=1){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products?page=${d}`)}geteachproduct(d){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products/${d}`)}static#t=this.\u0275fac=function(t){return new(t||a)(s.LFG(l.eN))};static#e=this.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);